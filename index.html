<!DOCTYPE html>
<html>
<head>
  <title>Nova Vida Rural VR - Otimizado Mobile</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
  <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
  <!-- Auto-walk otimizado: incline cabeça para andar -->
  <script>
    AFRAME.registerComponent('autowalk', {
      schema: { speed: {default: 0.03}, threshold: {default: 10} },
      init: function () {
        this.rig = this.el;
        this.camera = this.el.querySelector('a-camera');
      },
      tick: function () {
        const pitch = this.camera.getAttribute('rotation').x || 0;
        const forward = pitch > this.data.threshold ? -1 : (pitch < -this.data.threshold ? 1 : 0);
        if (forward) {
          const direction = this.camera.object3D.getWorldDirection(new THREE.Vector3()).setY(0).normalize();
          this.rig.object3D.position.addScaledVector(direction, this.data.speed * forward);
        }
      }
    });
  </script>
</head>
<body>
  <a-scene stats fog="type: linear; color: #a0d8ef; near: 30; far: 150" background="color: #87CEEB">
    <!-- Céu simples e leve (sem HDR) -->
    <a-sky color="#87CEEB"></a-sky>

    <!-- Iluminação básica (sem sombras) -->
    <a-entity light="type: ambient; color: #cccccc; intensity: 0.6"></a-entity>
    <a-entity light="type: hemisphere; color: #ffffff; groundColor: #b0e0e6; intensity: 0.5"></a-entity>

    <!-- Chão: grama leve -->
    <a-plane position="0 0 0" rotation="-90 0 0" width="200" height="200" color="#8B4513" material="src: https://i.imgur.com/3r7dYxP.jpg; repeat: 20 20"></a-plane>

    <!-- Casa simples -->
    <a-box position="-10 2 -20" width="8" height="4" depth="8" color="#D2691E"></a-box>
    <a-box position="-10 4.5 -20" width="6" height="3" depth="6" color="#A0522D"></a-box>

    <!-- Celeiro -->
    <a-box position="15 3 -25" width="10" height="6" depth="10" color="#B22222"></a-box>
    <a-box position="15 7 -25" width="8" height="4" depth="8" color="#8B0000"></a-box>

    <!-- Silo -->
    <a-cylinder position="25 3 -15" radius="2" height="8" color="#DAA520"></a-cylinder>

    <!-- Trator low-poly -->
    <a-box position="0 1 -15" width="4" height="1.5" depth="3" color="#228B22"></a-box>
    <a-box position="0 2 -15" width="2" height="1" depth="2" color="#006400"></a-box>

    <!-- Vacas low-poly -->
    <a-box position="-5 1 -30" width="2" height="1.5" depth="3" color="#FFFFFF"></a-box>
    <a-box position="5 1 -35" width="2" height="1.5" depth="3" color="#FFFFFF"></a-box>

    <!-- Galinhas animadas (poucas) -->
    <a-sphere position="-2 0.5 -25" radius="0.3" color="#FFD700">
      <a-animation attribute="position" dur="6000" repeat="indefinite" to="-2 0.5 -18" direction="alternate"></a-animation>
    </a-sphere>

    <!-- Árvores low-poly (menos, maiores) -->
    <a-entity position="-20 0 -10">
      <a-cylinder radius="0.4" height="4" color="#8B4513"></a-cylinder>
      <a-sphere position="0 4 0" radius="2" color="#228B22"></a-sphere>
    </a-entity>
    <a-entity position="20 0 -20">
      <a-cylinder radius="0.4" height="4" color="#8B4513"></a-cylinder>
      <a-sphere position="0 4 0" radius="2" color="#228B22"></a-sphere>
    </a-entity>

    <!-- Cerca simples -->
    <a-box position="-15 1 -15" width="0.2" height="1.5" depth="20" color="#A0522D"></a-box>

    <!-- Texto leve -->
    <a-text value="Nova Vida Rural - Explore!" position="0 3 -10" color="#FFF" align="center" scale="2 2 2"></a-text>

    <!-- Som leve (opcional, remove se quiser mais FPS) -->
    <a-sound src="https://cdn.pixabay.com/download/audio/2022/03/24/audio_a684b9d1b5.mp3?filename=birds-singing-and-stream-177311.mp3" autoplay loop volume="0.3"></a-sound>

    <!-- Câmera com auto-walk -->
    <a-entity id="rig" autowalk="speed: 0.03; threshold: 10" position="0 1.6 0">
      <a-camera look-controls></a-camera>
    </a-entity>
  </a-scene>
</body>
</html>
